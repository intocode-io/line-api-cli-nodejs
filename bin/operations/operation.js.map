{"version":3,"sources":["../../lib/operations/operation.js"],"names":["Operation","configFileName","config","_config","configFile","fs","readFileSync","_","console","log","code","help","process","exit","yaml","safeLoad","error","validateConfig","channel","id","secret","accessToken","validateFileExists","value","existsSync","onCancel"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;;;;;AAEe,MAAMA,SAAN,CAAgB;AAK7B,aAAWC,cAAX,GAA4B;AAC1B,WAAO,mBAAP;AACD;AAED;;;AAGA,aAAWC,MAAX,GAAoB;AAClB,QAAI,CAAC,KAAKC,OAAV,EAAmB;AACjB,UAAIC,UAAJ;;AACA,UAAI;AACFA,QAAAA,UAAU,GAAGC,YAAGC,YAAH,CAAiB,KAAI,KAAKL,cAAe,EAAzC,CAAb;AACD,OAFD,CAEE,OAAOM,CAAP,EAAU;AACVC,QAAAA,OAAO,CAACC,GAAR,CACG,eACE,WAAD,CAAYC,IACb,2CAFD,CAE4CC,IAH9C;AAKAC,QAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;;AACD,UAAI;AACF,aAAKV,OAAL,GAAeW,gBAAKC,QAAL,CAAcX,UAAd,CAAf;AACD,OAFD,CAEE,OAAOY,KAAP,EAAc;AACdR,QAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAAsDO,KAAtD;AACAJ,QAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;AACF;;AAED,WAAO,KAAKV,OAAZ;AACD;;AAED,SAAOc,cAAP,GAAwB;AACtB,QAAI,CAAC,KAAKf,MAAL,CAAYgB,OAAZ,CAAoBC,EAArB,IAA2B,CAAC,KAAKjB,MAAL,CAAYgB,OAAZ,CAAoBE,MAApD,EAA4D;AAC1DZ,MAAAA,OAAO,CAACC,GAAR,CACG,eACE,WAAD,CAAYC,IACb,2CAFD,CAE4CC,IAH9C;AAKA,aAAO,KAAP;AACD;;AACD,QAAI,CAAC,KAAKT,MAAL,CAAYgB,OAAZ,CAAoBG,WAAzB,EAAsC;AACpCb,MAAAA,OAAO,CAACC,GAAR,CACG,eACE,oBAAD,CAAqBC,IACtB,mDAFD,CAEoDC,IAHtD;AAKA,aAAO,KAAP;AACD;;AAED,WAAO,IAAP;AACD;;AAED,SAAOW,kBAAP,CAA0BC,KAA1B,EAAiC;AAC/B,QAAIA,KAAJ,EAAW;AACT,aAAOlB,YAAGmB,UAAH,CAAcD,KAAd,MAAyB,IAAzB,GAAgC,IAAhC,GAAuC,iBAA9C;AACD,KAFD,MAEO;AACL,aAAO,6CAAP;AACD;AACF;;AA/D4B;;;;gBAAVvB,S,kBACG;AACpByB,EAAAA,QAAQ,EAAE,MAAMb,OAAO,CAACC,IAAR,CAAa,CAAb;AADI,C;;gBADHb,S","sourcesContent":["import '../typedef';\n\nimport fs from 'fs';\nimport yaml from 'js-yaml';\n\nexport default class Operation {\n  static cancelOption = {\n    onCancel: () => process.exit(0)\n  };\n\n  static get configFileName() {\n    return '.line-api-cli.yml';\n  }\n\n  /** @type {Config} */\n  static _config;\n\n  static get config() {\n    if (!this._config) {\n      let configFile;\n      try {\n        configFile = fs.readFileSync(`./${this.configFileName}`);\n      } catch (_) {\n        console.log(\n          `Run command ${\n            `line init`.code\n          } to initialize project configuration file`.help\n        );\n        process.exit(0);\n      }\n      try {\n        this._config = yaml.safeLoad(configFile);\n      } catch (error) {\n        console.log('Unable to safe load configuration file', error);\n        process.exit(1);\n      }\n    }\n\n    return this._config;\n  }\n\n  static validateConfig() {\n    if (!this.config.channel.id || !this.config.channel.secret) {\n      console.log(\n        `Run command ${\n          `line init`.code\n        } to initialize project configuration file`.help\n      );\n      return false;\n    }\n    if (!this.config.channel.accessToken) {\n      console.log(\n        `Run command ${\n          `line token --issue`.code\n        } and save access token project configuration file`.help\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  static validateFileExists(value) {\n    if (value) {\n      return fs.existsSync(value) === true ? true : 'File not exists';\n    } else {\n      return 'Please input data file location to proceed.';\n    }\n  }\n}\n"],"file":"operation.js"}
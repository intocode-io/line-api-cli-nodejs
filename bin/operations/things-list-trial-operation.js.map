{"version":3,"sources":["../../lib/operations/things-list-trial-operation.js"],"names":["ThingsListTrialOperation","Operation","usage","sections","header","help","content","code","run","validateConfig","trialProducts","response","listRequest","send","data","error","console","length","table","map","product","row","success","id","name","type","channelId","serviceUuid","psdiServiceUuid","psdiCharacteristicUuid","log","info","ThingsListTrialProductsRequest","accessToken","config","channel"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;;;;;AAEe,MAAMA,wBAAN,SAAuCC,kBAAvC,CAAiD;AAK9D,aAAWC,KAAX,GAAmB;AACjB;AACA,UAAMC,QAAQ,GAAG,CACf;AACEC,MAAAA,MAAM,EAAE,sBAAsBC,IADhC;AAEEC,MAAAA,OAAO,EAAG,mBAAD,CAAoBC;AAF/B,KADe,CAAjB;AAOA,WAAOJ,QAAP;AACD;;AAED,eAAaK,GAAb,GAAmB;AACjB,QAAI,CAAC,KAAKC,cAAL,EAAL,EAA4B;AAC1B,aAAO,KAAP;AACD;;AAED,QAAIC,aAAJ;;AAEA,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAM,KAAKC,WAAL,CAAiBC,IAAjB,EAAvB;AAEAH,MAAAA,aAAa,GAAGC,QAAQ,CAACG,IAAzB;AACD,KAJD,CAIE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACA,aAAO,KAAP;AACD;;AAED,QAAIL,aAAa,IAAIA,aAAa,CAACO,MAAnC,EAA2C;AACzCD,MAAAA,OAAO,CAACE,KAAR,CACER,aAAa,CAACS,GAAd,CAAkBC,OAAO,IAAI;AAC3B,cAAMC,GAAG,GAAG,EAAZ;AAEAA,QAAAA,GAAG,CAAC,KAAKC,OAAN,CAAH,GAAoBF,OAAO,CAACG,EAA5B;AACAF,QAAAA,GAAG,CAAC,OAAOC,OAAR,CAAH,GAAsBF,OAAO,CAACI,IAA9B;AACAH,QAAAA,GAAG,CAAC,OAAOC,OAAR,CAAH,GAAsBF,OAAO,CAACK,IAA9B;AACAJ,QAAAA,GAAG,CAAC,aAAaC,OAAd,CAAH,GAA4BF,OAAO,CAACM,SAApC;AACAL,QAAAA,GAAG,CAAC,eAAeC,OAAhB,CAAH,GAA8BF,OAAO,CAACO,WAAtC;AACAN,QAAAA,GAAG,CAAC,oBAAoBC,OAArB,CAAH,GAAmCF,OAAO,CAACQ,eAA3C;AACAP,QAAAA,GAAG,CAAC,2BAA2BC,OAA5B,CAAH,GACEF,OAAO,CAACS,sBADV;AAGA,eAAOR,GAAP;AACD,OAbD,CADF;AAgBD,KAjBD,MAiBO;AACLL,MAAAA,OAAO,CAACc,GAAR,CAAY,0BAA0BC,IAAtC;AACA,aAAO,IAAP;AACD;;AAED,WAAO,IAAP;AACD;;AAxD6D;;;;gBAA3C/B,wB,iBACE,IAAIgC,uCAAJ,CAAmC;AACtDC,EAAAA,WAAW,EAFMjC,wBAEJ,CAAKkC,MAAL,CAAYC,OAAZ,CAAoBF;AADqB,CAAnC,C","sourcesContent":["import 'console.table';\nimport { Section } from 'command-line-usage';\n\nimport Operation from './operation';\nimport ThingsListTrialProductsRequest from '../apis/things-list-trial-products-request';\n\nexport default class ThingsListTrialOperation extends Operation {\n  static listRequest = new ThingsListTrialProductsRequest({\n    accessToken: this.config.channel.accessToken\n  });\n\n  static get usage() {\n    /** @type {Section[]} */\n    const sections = [\n      {\n        header: 'List trial products'.help,\n        content: `things list:trial`.code\n      }\n    ];\n\n    return sections;\n  }\n\n  static async run() {\n    if (!this.validateConfig()) {\n      return false;\n    }\n\n    let trialProducts;\n\n    try {\n      const response = await this.listRequest.send();\n\n      trialProducts = response.data;\n    } catch (error) {\n      console.error(error);\n      return false;\n    }\n\n    if (trialProducts && trialProducts.length) {\n      console.table(\n        trialProducts.map(product => {\n          const row = {};\n\n          row['ID'.success] = product.id;\n          row['Name'.success] = product.name;\n          row['Type'.success] = product.type;\n          row['Channel ID'.success] = product.channelId;\n          row['Service UUID'.success] = product.serviceUuid;\n          row['PSDI Service UUID'.success] = product.psdiServiceUuid;\n          row['PSDI Characteristic UUID'.success] =\n            product.psdiCharacteristicUuid;\n\n          return row;\n        })\n      );\n    } else {\n      console.log('Trial product not found'.info);\n      return true;\n    }\n\n    return true;\n  }\n}\n"],"file":"things-list-trial-operation.js"}
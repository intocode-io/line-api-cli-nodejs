{"version":3,"sources":["../../lib/operations/linetv-list-category-operation.js"],"names":["LINETvListCategoryOperation","Operation","usage","sections","header","help","content","code","validateCountryCode","countryCode","length","run","validateConfig","prompts","require","channelId","config","channel","id","type","name","message","prompt","validate","cancelOption","response","request","send","data","body","console","log","info","CategoryList","tabs","map","item","columnHeader","success","categoryName","categoryCode","serviceUrl","table","error","logAxiosError","LINETvListCategoryRequest","accessToken"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEe,MAAMA,2BAAN,SAA0CC,kBAA1C,CAAoD;AAKjE,aAAWC,KAAX,GAAmB;AACjB;AACA,UAAMC,QAAQ,GAAG,CACf;AACEC,MAAAA,MAAM,EAAE,kDAAkDC,IAD5D;AAEEC,MAAAA,OAAO,EAAG,sBAAD,CAAuBC;AAFlC,KADe,CAAjB;AAOA,WAAOJ,QAAP;AACD;;AAED,SAAOK,mBAAP,CAA2BC,WAA3B,EAAwC;AACtC,WAAOA,WAAW,CAACC,MAAZ,KAAuB,CAAvB,GACH,wCADG,GAEH,IAFJ;AAGD;;AAED,eAAaC,GAAb,GAAmB;AACjB,QAAI,CAAC,KAAKC,cAAL,EAAL,EAA4B;AAC1B,aAAO,KAAP;AACD;;AAED,UAAMC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,UAAMC,SAAS,GAAG,KAAKC,MAAL,CAAYC,OAAZ,CAAoBC,EAAtC;AAEA,UAAM;AAAET,MAAAA;AAAF,QACJ,CAAC,MAAMI,OAAO,CACZ;AACEM,MAAAA,IAAI,EAAE,MADR;AAEEC,MAAAA,IAAI,EAAE,aAFR;AAGEC,MAAAA,OAAO,EAAG,gBAAe,aAAaC,MAAO,EAH/C;AAIEC,MAAAA,QAAQ,EAAE,KAAKf;AAJjB,KADY,EAOZ,KAAKgB,YAPO,CAAd,KAQM,EATR;;AAWA,QAAI;AACF;AACA,YAAMC,QAAQ,GAAG,MAAM,KAAKC,OAAL,CAAaC,IAAb,CAAkBZ,SAAlB,EAA6BN,WAA7B,CAAvB;;AAEA,UAAI,CAACgB,QAAQ,CAACG,IAAV,IAAkBH,QAAQ,CAACG,IAAT,CAAcC,IAAd,KAAuB,IAA7C,EAAmD;AACjDC,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BC,IAAtC;AACA,eAAO,IAAP;AACD;;AACD,YAAMC,YAAY,GAAGR,QAAQ,CAACG,IAAT,CAAcC,IAAd,CAAmBK,IAAnB,CAAwBC,GAAxB,CAA4BC,IAAI,IAAI;AACvD,cAAMC,YAAY,GAAG,EAArB;AACAA,QAAAA,YAAY,CAAC,WAAWC,OAAZ,CAAZ,GAAmCF,IAAI,CAACG,YAAxC;AACAF,QAAAA,YAAY,CAAC,gBAAgBC,OAAjB,CAAZ,GAAwCF,IAAI,CAACI,YAA7C;AACAH,QAAAA,YAAY,CAAC,MAAMC,OAAP,CAAZ,GAA8BF,IAAI,CAACK,UAAnC;AACA,eAAOJ,YAAP;AACD,OANoB,CAArB;AAOAP,MAAAA,OAAO,CAACY,KAAR,CAAcT,YAAd;AACD,KAhBD,CAgBE,OAAOU,KAAP,EAAc;AACd,WAAKC,aAAL,CAAmBD,KAAnB;AACA,aAAO,KAAP;AACD;;AACD,WAAO,IAAP;AACD;;AA/DgE;;;;gBAA9C3C,2B,aACF,IAAI6C,kCAAJ,CAA8B;AAC7CC,EAAAA,WAAW,EAFM9C,2BAEJ,CAAKgB,MAAL,CAAYC,OAAZ,CAAoB6B;AADY,CAA9B,C","sourcesContent":["import '../typedef';\nimport 'console.table';\nimport { Section } from 'command-line-usage';\nimport Operation from './operation';\nimport LINETvListCategoryRequest from '../apis/linetv-list-catagory-request';\n\nexport default class LINETvListCategoryOperation extends Operation {\n  static request = new LINETvListCategoryRequest({\n    accessToken: this.config.channel.accessToken\n  });\n\n  static get usage() {\n    /** @type {Section[]} */\n    const sections = [\n      {\n        header: 'Gets a category list such as drama, music, etc.'.help,\n        content: `linetv list:category`.code\n      }\n    ];\n\n    return sections;\n  }\n\n  static validateCountryCode(countryCode) {\n    return countryCode.length !== 2\n      ? 'Please input ISO 3166-2 (2 characters)'\n      : true;\n  }\n\n  static async run() {\n    if (!this.validateConfig()) {\n      return false;\n    }\n\n    const prompts = require('prompts');\n    const channelId = this.config.channel.id;\n\n    const { countryCode } =\n      (await prompts(\n        {\n          type: 'text',\n          name: 'countryCode',\n          message: `Country Code ${'ISO 3166-2'.prompt}`,\n          validate: this.validateCountryCode\n        },\n        this.cancelOption\n      )) || {};\n\n    try {\n      /** @type {import('axios').AxiosResponse<LINETvListCategoryResponseData>} */\n      const response = await this.request.send(channelId, countryCode);\n\n      if (!response.data || response.data.body === null) {\n        console.log('Category list not found'.info);\n        return true;\n      }\n      const CategoryList = response.data.body.tabs.map(item => {\n        const columnHeader = {};\n        columnHeader['Category'.success] = item.categoryName;\n        columnHeader['Category Code'.success] = item.categoryCode;\n        columnHeader['URL'.success] = item.serviceUrl;\n        return columnHeader;\n      });\n      console.table(CategoryList);\n    } catch (error) {\n      this.logAxiosError(error);\n      return false;\n    }\n    return true;\n  }\n}\n"],"file":"linetv-list-category-operation.js"}
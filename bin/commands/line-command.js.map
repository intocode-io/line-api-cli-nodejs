{"version":3,"sources":["../../lib/commands/line-command.js"],"names":["LINECommand","versionText","version","getCommandLineArgs","commandLineArgs","require","operation","_unknown","name","defaultOption","stopAtFirstUnknown","argv","options","alias","type","Boolean","cli","colors","setTheme","theme","help","commandLineUsage","ImageHelper","draw","console","log","LINEInitOperation","usage","LINETokenOperation","process","exit","run","code","warn","error"],"mappings":"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","sourcesContent":["import '../typedef';\n\nimport colors from 'colors';\n\nimport ImageHelper from '../image-helper';\nimport theme from '../theme';\nimport LINEInitOperation from '../operations/line-init-operation';\nimport LINETokenOperation from '../operations/line-token-operation';\nimport { version } from '../../package.json';\n\nexport default class LINECommand {\n  static get versionText() {\n    return `LINE CLIs v${version}`;\n  }\n\n  /**\n   * @return {operation:string, options:LINECommandOptions, _unknown: Array<string>}\n   */\n  static getCommandLineArgs() {\n    const commandLineArgs = require('command-line-args');\n\n    const { operation, _unknown } = commandLineArgs(\n      [{ name: 'operation', defaultOption: true }],\n      { stopAtFirstUnknown: true }\n    );\n    const argv = _unknown || [];\n    const options = commandLineArgs(\n      [\n        { name: 'help', alias: 'h', type: Boolean },\n        { name: 'version', alias: 'v', type: Boolean },\n        { name: 'issue', type: Boolean },\n        { name: 'revoke', type: Boolean }\n      ],\n      { argv }\n    );\n\n    return { operation, options, _unknown };\n  }\n\n  static async cli() {\n    try {\n      colors.setTheme(theme);\n\n      const { operation, options } = this.getCommandLineArgs();\n\n      if (options.help) {\n        const commandLineUsage = require('command-line-usage');\n\n        await ImageHelper.draw('chick-helps');\n\n        switch (operation) {\n          case 'init':\n            console.log(commandLineUsage(LINEInitOperation.usage));\n            break;\n          case 'token':\n            console.log(commandLineUsage(LINETokenOperation.usage));\n            break;\n          default:\n            console.log(\n              commandLineUsage([\n                ...LINEInitOperation.usage,\n                ...LINETokenOperation.usage\n              ])\n            );\n        }\n        process.exit(0);\n      }\n\n      if (options.version) {\n        await ImageHelper.draw('chick-helps');\n        console.log(this.versionText);\n        process.exit(0);\n      }\n\n      if (operation === 'init') {\n        await LINEInitOperation.run(options);\n      } else if (operation === 'token') {\n        await LINETokenOperation.run(options);\n      } else {\n        await ImageHelper.draw('chick-helps');\n        console.log(\n          `Unknown operation: ${(operation || 'undefined').code}`.warn\n        );\n      }\n      return;\n    } catch (error) {\n      await ImageHelper.draw('chick-helps');\n      console.error(error);\n      process.exit(1);\n    }\n  }\n}\n"],"file":"line-command.js"}